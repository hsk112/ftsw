<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8">
		<title>水保检查-新增现场检查纪录-水土保持措施落实情况</title>
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black">

		<link href="../../css/mui.min.css" rel="stylesheet" />
		<link href="../../css/mui.picker.min.css" rel="stylesheet" />
		<link href="../../css/mui.poppicker.css" rel="stylesheet" />
		<link href="../../css/common.css" rel="stylesheet" />
		<link rel="stylesheet" type="text/css" href="../../css/mui.imageviewer.css" />
		<style>
			.mui-popover {
			height: 300px;
		}
		.mui-content {
			padding: 10px;
		}
		.bar-title{
			font-size: 14px;
			font-weight: 400;
			color: #888888;
		}
		.item-title{
			font-size: 14px;
			font-weight: 400;
			color: #444444;
		}
	.inputCss{
		font-size: 16px;
		font-weight: 400;
		color: #1A1616;
		height: 30px;
	}
	.checkBoxCss{
		font-size: 16px;
		font-weight: 400;
		color: #000000;
	}
		.bottom-item-btn {
			height: 100px;
			position: fixed;
			z-index: 999;
			width: 100%;
			background: #f2f2f2;
			bottom: 0px;
			padding-top: 30px;
		}
		.bottom-item-btn .item {
			width: 90%;
			margin-left: 5%;
			text-align: center;
			padding: 0 14px;

		}

		.bottom-item-btn .item div {
			border: 1px solid #337BFB;
			border-radius: 20px;
			height: 40px;
			line-height: 40px;
			font-size: 16px;
		}
		.file-item-box ul li{
			height: 30px;
			line-height: 30px;
			padding: 0;
			margin: 0;

		}
		.mui-table-view:after{ height:0}
		.mui-table-view:before{ height:0}
		.mui-table-view-cell:after{ height:0}
		.mui-table-view-cell:before{ height:0}
		.mui-table-view::-webkit-scrollbar {
			display: none;
		}
		.mui-table-view-cell{
			width: 100%;
			text-align: left;
		}
		.file_upload{
			padding: 3px 0;
			width: 90px;
			background: #337BFC;
			border: 1px solid #337BFC;
			border-radius: 26px;
		}
		.btn-label{
			font-size: 12px;
			font-weight: 400;
			color: #B1B1B1;
			line-height: 14px;
		}
		.file-name{
			width: 85%;
			margin-left: 5px;
			box-sizing: border-box;
			overflow: scroll;
			color: blue;
			float: left;
			white-space: nowrap;
		}
		.file-name{
			display: inline-block;
		}
		.file_close{
			float: right;
		}
		input[readonly]{
		background-color: rgb(238, 238, 238, 0.5)
		}
	</style>
	</head>

	<body>
		<!--页面主结构开始-->
		<div id="app" class="mui-views">
			<div class="mui-view">
				<div class="mui-navbar">
				</div>
				<div class="mui-pages">
				</div>
			</div>
		</div>
		<div class="bottom-item-btn" id="bottom-item-btn">
			<!-- 			<div class="item" id="hold">
				<div style="background: #fff;color:#337BFC ;border:1px solid #337BFC">暂存</div>
			</div> -->
			<div class="item" id="nextStep">
				<div style="background: #337BFC;color: #fff">下一步</div>
			</div>
		</div>
		<!--页面主结构结束-->
		<!--单页面开始-->
		<div id="mui-content" class="mui-page paish">
			<!--页面标题栏开始-->
			<div style="position:fixed;top:0;left:0;z-index: 99;width:100%;background: #ffffff;">
				<ol class="steps">
					<li class="step-active">
						<div class="step-content">
							<div class="step-num"></div>
							<div class="step-text">项目基本...</div>
						</div>
					</li>
					<li class="step-active">
						<div class="step-line"></div>
						<div class="step-content">
							<div class="step-num"></div>
							<div class="step-text">水土保持措...</div>
						</div>
					</li>
					<li class="">
						<div class="step-line"></div>
						<div class="step-content">
							<div class="step-num"></div>
							<div class="step-text">整改情况...</div>
						</div>
					</li>
				</ol>
				<div style="height: 5px;background: #F4F4F4;"></div>
			</div>
			<!--页面标题栏结束-->
			<!--页面主内容区开始-->
			<div class="mui-page-content">
				<div id="scroll-content" class="mui-scroll-wrapper" style="margin-top: 90px;;margin-bottom: 100px;">
					<div class="mui-scroll">
						<div class="scroll-li">
							<div class="bar-title">
								水土保持措施落实情况
							</div>
							<div class="info-bar-content">
								<div class="info-bar-content-item">
									<!-- style="height: 130px;" -->
									<div class="item-title">
										截排水沟建设情况
									</div>
									<div class="mui-input-row item-input">
										<input id="drainageDitchConstruct" type="text" class="mui-input-clear inputCss" value="" placeholder="不超过40字"
										 maxlength="40" onkeyup="format_input('截排水沟建设情况',40,this)" style="width:90%">
										<!-- <textarea id="1111" rows="3" type="text" class="mui-input-clear inputCss" value="" style="height: 90px;border: none;padding-left: 0;"
										 placeholder="不超过40字" maxlength="40" onkeyup="format_input('截排水沟建设情况',40,this)"></textarea> -->
									</div>
								</div>
								<div class="info-bar-content-item">
									<div class="item-title">
										截排水沟是否存在淤积或损毁情况
									</div>
									<div class="item-checkbox">
										<div class="mui-input-row mui-checkbox mui-left">
											<label class="checkBoxCss">是</label>
											<input name="jpsg" value="1" type="checkbox">
										</div>
										<div class="mui-input-row mui-checkbox mui-left">
											<label class="checkBoxCss">否</label>
											<input name="jpsg" value="0" type="checkbox">
										</div>
									</div>
								</div>
								<div class="info-bar-content-item">
									<div class="item-title">
										截排水沟淤积或损毁具体情况
									</div>
									<div class="mui-input-row item-input">
										<input id="jpsg_d" readonly="true" type="text" class="mui-input-clear inputCss" value="" style="width:90%"
										 placeholder="请输入具体情况" maxlength="30" onkeyup="format_input('截排水沟淤积或损毁具体情况',30,this)">
									</div>
								</div>
								<div class="info-bar-content-item">
									<div class="item-title">
										截排水沟是否已贯通
									</div>
									<div class="item-checkbox">
										<div class="mui-input-row mui-checkbox mui-left">
											<label class="checkBoxCss">是</label>
											<input name="jpsggt" value="1" type="checkbox">
										</div>
										<div class="mui-input-row mui-checkbox mui-left">
											<label class="checkBoxCss">否</label>
											<input name="jpsggt" value="0" type="checkbox">
										</div>
									</div>
								</div>
								<div class="info-bar-content-item">
									<div class="item-title">
										截排水沟未贯通原因说明
									</div>
									<div class="mui-input-row item-input">
										<input id="jpsggt_d" type="text" class="mui-input-clear inputCss" value="" readonly="true" style="width:90%"
										 placeholder="请输入具体情况" maxlength="30" onkeyup="format_input('截排水沟未贯通原因说明',30,this)">
									</div>
								</div>
								<div class="info-bar-content-item">
									<div class="item-title">
										沉沙池建设情况
									</div>
									<div class="mui-input-row item-input">
										<input id="gritChamberConstruct" type="text" class="mui-input-clear inputCss" value="" style="width:90%"
										 placeholder="不超过40字" maxlength="40" onkeyup="format_input('沉沙池建设情况',40,this)">
									</div>
								</div>
								<div class="info-bar-content-item">
									<div class="item-title">
										沉沙池是否存在淤积或损毁情况
									</div>
									<div class="item-checkbox">
										<div class="mui-input-row mui-checkbox mui-left">
											<label class="checkBoxCss">是</label>
											<input name="cscyj" value="1" type="checkbox">
										</div>
										<div class="mui-input-row mui-checkbox mui-left">
											<label class="checkBoxCss">否</label>
											<input name="cscyj" value="0" type="checkbox">
										</div>
									</div>
								</div>
								<div class="info-bar-content-item">
									<div class="item-title">
										沉沙池淤积或损毁具体情况
									</div>
									<div class="mui-input-row item-input">
										<input id="cscyj_d" type="text" class="mui-input-clear inputCss" value="" style="width:90%" placeholder="请输入具体情况"
										 readonly="true" maxlength="30" onkeyup="format_input('沉砂池淤积或损毁具体情况',30,this)">
									</div>
								</div>
								<div class="info-bar-content-item">
									<div class="item-title">
										有无泥沙流出项目区情况
									</div>
									<div class="item-checkbox">
										<div class="mui-input-row mui-checkbox mui-left">
											<label class="checkBoxCss">是</label>
											<input name="nslc" value="1" type="checkbox">
										</div>
										<div class="mui-input-row mui-checkbox mui-left">
											<label class="checkBoxCss">否</label>
											<input name="nslc" value="0" type="checkbox">
										</div>
									</div>
								</div>
								<div class="info-bar-content-item">
									<div class="item-title">
										泥沙流出项目区具体情况
									</div>
									<div class="mui-input-row item-input">
										<input id="nslc_d" type="text" class="mui-input-clear inputCss" value="" style="width:90%" placeholder="请输入具体情况"
										 readonly="true" maxlength="30" onkeyup="format_input('泥沙流出项目区具体情况',30,this)">
									</div>
								</div>
								<div class="info-bar-content-item">
									<div class="item-title">
										拦挡措施建设情况
									</div>
									<div class="mui-input-row item-input">
										<input id="fenceConstruct" type="text" class="mui-input-clear inputCss" value="" style="width:90%"
										 placeholder="不超过40字" maxlength="40" onkeyup="format_input('拦挡措施建设情况',40,this)">
									</div>
								</div>
								<div class="info-bar-content-item">
									<div class="item-title">
										拦挡措施是否存在损毁情况
									</div>
									<div class="item-checkbox">
										<div class="mui-input-row mui-checkbox mui-left">
											<label class="checkBoxCss">是</label>
											<input name="ldcssh" value="1" type="checkbox">
										</div>
										<div class="mui-input-row mui-checkbox mui-left">
											<label class="checkBoxCss">否</label>
											<input name="ldcssh" value="0" type="checkbox">
										</div>
									</div>
								</div>
								<div class="info-bar-content-item">
									<div class="item-title">
										拦挡措施损毁具体情况
									</div>
									<div class="mui-input-row item-input">
										<input id="ldcssh_d" readonly="true" type="text" class="mui-input-clear inputCss" value="" style="width:90%"
										 placeholder="请输入具体情况" maxlength="30" onkeyup="format_input('拦挡措施损毁具体情况',30,this)">
									</div>
								</div>
								<div class="info-bar-content-item">
									<div class="item-title">
										现场采取覆盖措施情况
									</div>
									<div class="mui-input-row item-input">
										<input id="coverConstruct" type="text" class="mui-input-clear inputCss" value="" style="width:90%"
										 placeholder="不超过40字" maxlength="40" onkeyup="format_input('现场采取覆盖措施情况',40,this)">
									</div>
								</div>
								<div class="info-bar-content-item">
									<div class="item-title">
										覆盖措施是否存在损毁情况
									</div>
									<div class="item-checkbox">
										<div class="mui-input-row mui-checkbox mui-left">
											<label class="checkBoxCss">是</label>
											<input name="fgcssh" value="1" type="checkbox">
										</div>
										<div class="mui-input-row mui-checkbox mui-left">
											<label class="checkBoxCss">否</label>
											<input name="fgcssh" value="0" type="checkbox">
										</div>
									</div>
								</div>
								<div class="info-bar-content-item">
									<div class="item-title">
										覆盖措施损毁具体情况
									</div>
									<div class="mui-input-row item-input">
										<input id="fgcssh_d" readonly="true" type="text" class="mui-input-clear inputCss" value="" style="width:90%"
										 placeholder="请输入具体情况" maxlength="30" onkeyup="format_input('覆盖措施损毁具体情况',30,this)">
									</div>
								</div>
								<div class="info-bar-content-item" style="border:none">
									<div class="item-title">
										现场已落实其他水土保持措施情况
									</div>
									<div class="mui-input-row item-input">
										<input id="otherConservationSituation" type="text" class="mui-input-clear inputCss" value="" style="width:90%"
										 placeholder="不超过40字" maxlength="40" onkeyup="format_input('现场已落实其他水土保持措施情况',40,this)">
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
			<!--页面主内容区结束-->
		</div>

	</body>

	<script type="text/javascript" src="http://gd.wiseom.cn/supermap/mapbox-gl-enhance.js"></script>
	<script type="text/javascript" src="http://gd.wiseom.cn/supermap/iclient-mapboxgl.min.js"></script>
	<script src="http://gd.wiseom.cn/mobile-lib/mobile-lib.umd.js"></script>


	<script src="../../js/mui.min.js"></script>
	<script src="../../js/mui.view.js"></script>
	<script src="../../js/mui.locker.js"></script>
	<script src="../../js/mui.picker.min.js"></script>
	<script src="../../js/mui.picker.js"></script>
	<script src="../../js/mui.poppicker.js"></script>

	<script src="../../js/app.js"></script>
	<script src="../../js/config.js"></script>
	<script src="../../js/jquery.min.js"></script>
	<script src="../../js/common.js"></script>
	<script src="../../js/mixed.js"></script>
	<script src="../../js/helper.js"></script>
	<script src="../../js/uploadimage.js"></script>
	<script src="../../js/s4.js"></script>
	<script src="../../js/smutils.js"></script>
	<script src="../../js/byte&string.js"></script>
	<script src="../../js/ajaxhook.min.js"></script>
	<script src="../../js/mui.zoom.js"></script>
	<script src="../../js/mui.previewimage.js"></script>

	<!-- <script src="../../js/vconsole.min.js"></script> -->
	<script>
		// var vConsole = new VConsole();
		mui.init({
			swipeBack: false
		});
		var self;
		//初始化单页view
		var viewApi = mui('#app').view({
			defaultPage: '#mui-content'
		});

		//初始化单页的区域滚动
		mui('.mui-scroll-wrapper').scroll();


		var opt = "add"; //操作类型
		var id = "";
		var flag = false;
		var userPicker = new mui.PopPicker();
		mui.plusReady(function() {
			//界面元素控制
			initView();

			// 初始化选项框状态
			initCheckBox();

			var originalHeight = document.documentElement.clientHeight || document.body.clientHeight;
			window.onresize = function() {
				var resizeHeight = document.documentElement.clientHeight || document.body.clientHeight;
				//软键盘弹起与隐藏  都会引起窗口的高度发生变化
				if (resizeHeight * 1 < originalHeight * 1) { ;
					$("#scroll-content").css("margin", "0")
					$("#bottom-item-btn").hide()
				} else {
					$("#scroll-content").css("margin-bottom", "100px")
					$("#bottom-item-btn").show()
				}
			}
		});

		//界面元素控制
		var initView = function() {

			self = plus.webview.currentWebview();

			//控制input显示，只有选择截排水沟存在淤积或损毁情况时才能编辑具体情况
			$("input[name='jpsg']").change(function() {
				var value = $(this).val();
				if ((value == 1) && $(this).is(':checked')) {
					$("#jpsg_d").attr("readonly", false);
				} else {
					$("#jpsg_d").attr("readonly", true);
				}
			});

			//控制input显示，只有选择截排水沟未贯通时才能编辑具体情况
			$("input[name='jpsggt']").change(function() {
				var value = $(this).val();
				if ((value == 0) && $(this).is(':checked')) {
					$("#jpsggt_d").attr("readonly", false);
				} else {
					$("#jpsggt_d").attr("readonly", true);
				}
			});

			//控制input显示，只有选择沉砂池淤积时才能编辑具体情况
			$("input[name='cscyj']").change(function() {
				var value = $(this).val();
				if ((value == 1) && $(this).is(':checked')) {
					$("#cscyj_d").attr("readonly", false);
				} else {
					$("#cscyj_d").attr("readonly", true);
				}
			});

			//控制input显示，只有选择有泥沙流出项目区时才能编辑具体情况
			$("input[name='nslc']").change(function() {
				var value = $(this).val();
				if ((value == 1) && $(this).is(':checked')) {
					$("#nslc_d").attr("readonly", false);
				} else {
					$("#nslc_d").attr("readonly", true);
				}
			});

			//控制input显示，只有选择拦挡措施损毁时才能编辑具体情况
			$("input[name='ldcssh']").change(function() {
				var value = $(this).val();
				if ((value == 1) && $(this).is(':checked')) {
					$("#ldcssh_d").attr("readonly", false);
				} else {
					$("#ldcssh_d").attr("readonly",true);
				}
			});

			//控制input显示，只有选择覆盖措施损毁时才能编辑具体情况
			$("input[name='fgcssh']").change(function() {
				var value = $(this).val();
				if ((value == 1) && $(this).is(':checked')) {
					$("#fgcssh_d").attr("readonly", false);
				} else {
					$("#fgcssh_d").attr("readonly", true);
				}
			});
			// var type = self.type;
			// if (type != undefined && type == "edit") {
			// 	opt = "edit";
			// 	console.log("opt:" + opt + ",guid:" + self.guid);
			// 	//修改,需要进行表单赋值操作
			// 	var guid = self.guid;
			// 	if (guid != null && guid != undefined) {
			// 		searchMixById(guid, function(data) {
			// 			console.log("详情接口返回：" + JSON.stringify(data));
			// 			if (data.success) {
			// 				showData(data.result); //渲染数据
			// 			} else {
			// 				mui.toast(data.message == undefined ? data : data.message);
			// 				app.showLoader();
			// 				setTimeout(function() {
			// 					app.hideLoader();
			// 					mui.back(); //返回
			// 				}, 3000);
			// 			}
			// 		})
			// 	} else {
			// 		app.showLoader();
			// 		setTimeout(function() {
			// 			app.toast("guid获取异常");
			// 			app.hideLoader();
			// 			mui.back(); //返回
			// 		}, 2000);
			// 	}
			// }

			function showData(data) {
				var sceneDataStr = JSON.parse(localStorage.getItem("sceneData"));
				if (sceneDataStr != null) {
					$('#drainageDitchConstruct').val(sceneDataStr.drainageDitchConstruct); //截排水沟建设情况

					if (sceneDataStr.drainageDitchIsDam == '1') {
						$("input[name='jpsg'][value=1]").prop("checked", true); //截排水沟是否存在淤积或损毁
						$("input[name='jpsg'][value=0]").prop("checked", false);
						$("#jpsg_d").attr("readonly", false);
						$('#jpsg_d').val(sceneDataStr.drainageDitchSituation); //截排水沟是否存在淤积或损毁具体情况
					} else if (sceneDataStr.drainageDitchIsDam == '0') {
						$("input[name='jpsg'][value=1]").prop("checked", false); //截排水沟是否存在淤积或损毁
						$("input[name='jpsg'][value=0]").prop("checked", true);
						$("#jpsg_d").attr("readonly", true);
					}

					if (sceneDataStr.drainageDitchIsPass == '0') {
						$("input[name='jpsggt'][value=1]").prop("checked", false); //截排水沟是否已贯通
						$("input[name='jpsggt'][value=0]").prop("checked", true);
						$("#jpsggt_d").attr("readonly", false);
						$('#jpsggt_d').val(sceneDataStr.drainageDitchUnpassReason); //未贯通原因说明
					} else if (sceneDataStr.drainageDitchIsPass == '1') {
						$("input[name='jpsggt'][value=1]").prop("checked", true); //截排水沟是否已贯通
						$("input[name='jpsggt'][value=0]").prop("checked", false);
						$("#jpsggt_d").attr("readonly", true);
					}

					$('#gritChamberConstruct').val(sceneDataStr.gritChamberConstruct); //沉沙池建设情况

					if (sceneDataStr.gritChamberIsDam == '1') {
						$("input[name='cscyj'][value=1]").prop("checked", true); //沉沙池是否存在淤积或损毁
						$("input[name='cscyj'][value=0]").prop("checked", false);
						$("#cscyj_d").attr("readonly", false);
						$('#cscyj_d').val(sceneDataStr.gritChamberSituation); //沉沙池是否存在淤积或损毁具体情况
					} else if (sceneDataStr.gritChamberIsDam == '0') {
						$("input[name='cscyj'][value=1]").prop("checked", false); //沉沙池是否存在淤积或损毁
						$("input[name='cscyj'][value=0]").prop("checked", true);
						$("#cscyj_d").attr("readonly", true);
					}

					if (sceneDataStr.gritChamberIsOverflow == '1') {
						$("input[name='nslc'][value=1]").prop("checked", true); //有无泥沙流出项目区
						$("input[name='nslc'][value=0]").prop("checked", false);
						$("#nslc_d").attr("readonly", false);
						$('#nslc_d').val(sceneDataStr.overflowSituation); //有无泥沙流出项目区具体情况
					} else if (sceneDataStr.gritChamberIsOverflow == '0') {
						$("input[name='nslc'][value=1]").prop("checked", false); //有无泥沙流出项目区
						$("input[name='nslc'][value=0]").prop("checked", true);
						$("#nslc_d").attr("readonly", true);
					}

					$('#fenceConstruct').val(sceneDataStr.fenceConstruct); //拦挡措施建设情况

					if (sceneDataStr.fenceIsDam == '1') {
						$("input[name='ldcssh'][value=1]").prop("checked", true); //拦挡措施是否存在损毁
						$("input[name='ldcssh'][value=0]").prop("checked", false);
						$("#ldcssh_d").attr("readonly", false);
						$('#ldcssh_d').val(sceneDataStr.fenceSituation); //拦挡措施是否存在损毁具体情况
					} else if (sceneDataStr.fenceIsDam == '0') {
						$("input[name='ldcssh'][value=1]").prop("checked", false); //拦挡措施是否存在损毁
						$("input[name='ldcssh'][value=0]").prop("checked", true);
						$("#ldcssh_d").attr("readonly", true);
					}

					$('#coverConstruct').val(sceneDataStr.coverConstruct); //现场采取覆盖措施
					if (sceneDataStr.coverIsDam == '1') {
						$("input[name='fgcssh'][value=1]").prop("checked", true); //覆盖措施是否存在损毁
						$("input[name='fgcssh'][value=0]").prop("checked", false);
						$("#fgcssh_d").attr("readonly", false);
						$('#fgcssh_d').val(sceneDataStr.coverSituation); //覆盖措施是否存在损毁具体情况
					} else if (sceneDataStr.coverIsDam == '0') {
						$("input[name='fgcssh'][value=1]").prop("checked", false); //覆盖措施是否存在损毁
						$("input[name='fgcssh'][value=0]").prop("checked", true);
						$("#fgcssh_d").attr("readonly", true);
					}

					$('#otherConservationSituation').val(sceneDataStr.otherConservationSituation); //现场已落实其他水土保持措施情况				
				}
			}

			//默认填写
			$("#surveyPerson_text").val(app.userInfo().realname);

			//日期选择
			$("#surveyDate").on("tap", function() {
				var that = $(this);

				plus.nativeUI.pickDate(function(e) {
					var d = e.date;
					that.val(d.getFullYear() + "-" + preZero((d.getMonth() + 1), 2) + "-" + preZero(d.getDate(), 2))
				}, function(e) {
					that.val("");
				}, {
					title: "请选择日期"
				});
				plusDate(function(data) {
					that.val(data)
				}, 1);
			})
		}

		// 初始化选项框状态
		var initCheckBox = function() {
			$(".info-bar-content-item").find(":checkbox").each(function() {
				$(this).click(function() {
					if ($(this).is(':checked')) {
						$(this).parent().siblings().find(":checkbox").each(function() {
							$(this).prop("checked",false)
						});
					}
				});
			});
		}

		//暂存
		$("#hold").on("tap", function(event) {
			saveScene();
			app.toast("暂存成功")
			mui.fire(plus.webview.getWebviewById('proDetail.html'), 'reload1');
			popToTarget('proDetail.html');
		});

		//下一步
		$("#nextStep").on("tap", function(event) {
			if (validateRequiredFields()) {
				saveScene();
				app.openPage("./stepThe.html", {
					titleNView: {
						titleText: '新增现场检查纪录',
						autoBackButton: true
					}
				},{projectId: self.projectId});
			}
		});



		//组装表单
		function saveScene() {
			var sceneDataStr = JSON.parse(localStorage.getItem("sceneData"));

			sceneDataStr.drainageDitchConstruct = $('#drainageDitchConstruct').val(); //截排水沟建设情况
			sceneDataStr.drainageDitchIsDam = $("input[name='jpsg']:checked").val(); //截排水沟是否存在淤积或损毁
			sceneDataStr.drainageDitchSituation = $('#jpsg_d').val(); //截排水沟是否存在淤积或损毁具体情况
			sceneDataStr.drainageDitchIsPass = $("input[name='jpsggt']:checked").val(); //截排水沟是否已贯通
			sceneDataStr.drainageDitchUnpassReason = $('#jpsggt_d').val(); //未贯通原因说明
			sceneDataStr.gritChamberConstruct = $('#gritChamberConstruct').val(); //沉沙池建设情况
			sceneDataStr.gritChamberIsDam = $("input[name='cscyj']:checked").val(); //沉沙池是否存在淤积或损毁
			sceneDataStr.gritChamberSituation = $('#cscyj_d').val(); //沉沙池是否存在淤积或损毁具体情况
			sceneDataStr.gritChamberIsOverflow = $("input[name='nslc']:checked").val(); //有无泥沙流出项目区
			sceneDataStr.overflowSituation = $('#nslc_d').val(); //有无泥沙流出项目区具体情况
			sceneDataStr.fenceConstruct = $('#fenceConstruct').val(); //拦挡措施建设情况
			sceneDataStr.fenceIsDam = $("input[name='ldcssh']:checked").val(); //拦挡措施是否存在损毁
			sceneDataStr.fenceSituation = $('#ldcssh_d').val(); //拦挡措施是否存在损毁具体情况
			sceneDataStr.coverConstruct = $('#coverConstruct').val(); //现场采取覆盖措施
			sceneDataStr.coverIsDam = $("input[name='fgcssh']:checked").val(); //覆盖措施是否存在损毁
			sceneDataStr.coverSituation = $('#fgcssh_d').val(); //覆盖措施是否存在损毁具体情况
			sceneDataStr.otherConservationSituation = $('#otherConservationSituation').val(); //现场已落实其他水土保持措施情况

			localStorage.setItem("sceneData", JSON.stringify(sceneDataStr));
			console.log(JSON.stringify(localStorage.getItem("sceneData")));
			return true;
		}

		// 对Date的扩展，将 Date 转化为指定格式的String
		// 月(M)、日(d)、小时(h)、分(m)、秒(s)、季度(q) 可以用 1-2 个占位符，
		// 年(y)可以用 1-4 个占位符，毫秒(S)只能用 1 个占位符(是 1-3 位的数字)
		// 例子：
		// (new Date()).Format("yyyy-MM-dd hh:mm:ss.S") ==> 2006-07-02 08:09:04.423
		// (new Date()).Format("yyyy-M-d h:m:s.S") ==> 2006-7-2 8:9:4.18

		Date.prototype.Format = function(fmt) { // author: meizz
			var o = {
				"M+": this.getMonth() + 1, // 月份
				"d+": this.getDate(), // 日
				"h+": this.getHours(), // 小时
				"m+": this.getMinutes(), // 分
				"s+": this.getSeconds(), // 秒
				"q+": Math.floor((this.getMonth() + 3) / 3), // 季度
				"S": this.getMilliseconds() // 毫秒
			};
			if (/(y+)/.test(fmt))
				fmt = fmt.replace(RegExp.$1, (this.getFullYear() + "").substr(4 - RegExp.$1.length));
			for (var k in o)
				if (new RegExp("(" + k + ")").test(fmt)) fmt = fmt.replace(RegExp.$1, (RegExp.$1.length == 1) ? (o[k]) : (("00" +
					o[k]).substr(("" + o[k]).length)));
			return fmt;
		}

		function format_input(type, num, obj) {
			if (/^\s+$/gi.test(obj.value)) {
				obj.value = '';
			}

			if (obj.value.length >= num) {
				obj.value = obj.value.slice(0, num);
				// obj.focus();				
				app.toast(type + "不可大于" + num + "个字！")
			}
		}
	</script>

</html>
