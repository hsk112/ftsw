<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8">
		<title>应急资源详情</title>
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black">

		<link href="../../../css/mui.min.css" rel="stylesheet" />
		<link href="../../../css/mui.picker.min.css" rel="stylesheet" />
		<link href="../../../css/mui.poppicker.css" rel="stylesheet" />
		<link href="../../../css/common.css" rel="stylesheet" />
		<link rel="stylesheet" type="text/css" href="../../../css/mui.imageviewer.css" />
		<style>
			.mui-popover {
			height: 300px;
		}
		.mui-content {
			padding: 10px;
		}
		.bar-title{
			font-size: 14px;
			font-weight: 400;
			color: #888888;
		}
		.item-title{
			font-size: 14px;
			font-weight: 400;
			color: #444444;
		}
	.mui-icon-arrowright{
		color:#62666E;
		font-weight: 100 !important;
		width: 16px;
	}
	.inputCss{
		font-size: 16px;
		font-weight: 400;
		color: #1A1616;
		height: 30px;
	}
	.checkBoxCss{
		font-size: 16px;
		font-weight: 400;
		color: #000000;
	}
		.bottom-item-btn {
			height: 100px;
			position: fixed;
			z-index: 99;
			width: 100%;
			background: #f2f2f2;
			bottom: 0px;
			padding-top: 30px;
		}
		.bottom-item-btn .item {
			width: 50%;
			float: left;
			text-align: center;
			padding: 0 14px;

		}

		.bottom-item-btn .item div {
			border: 1px solid #337BFB;
			border-radius: 20px;
			height: 40px;
			line-height: 40px;
			font-size: 16px;
		}
		.file-item-box ul li{
			height: 30px;
			line-height: 30px;
			padding: 0;
			margin: 0;

		}
		.mui-table-view:after{ height:0}
		.mui-table-view:before{ height:0}
		.mui-table-view-cell:after{ height:0}
		.mui-table-view-cell:before{ height:0}
		.mui-table-view::-webkit-scrollbar {
			display: none;
		}
		.mui-table-view-cell{
			width: 100%;
			text-align: left;
		}
		textarea::-webkit-input-placeholder{
            color:#B1B1B1;			
			font-size: 16px;
			font-weight: 400;
		}
		.img_item {
			float: left;
			text-align: left;
			width: 72px;
			height: 100px;
			margin-right: 20px;
			position: relative;
		}
		
		.img_item::after {
			clear: both;
			content: '';
			display: block;
			width: 0;
			height: 0;
			visibility: hidden;
		}
		.img_item .myImgClose{
			position: absolute;
			right: -5px;
			top: -5px;
		}
		.img_item img{
			width: 72px;
			height: 72px;
			border-radius: 5px;
			overflow: hidden;
		}
		.img_item .img_close {
			display: inline-block;
			background-color: #1da1f2;
			color: #FFF;
		}
		.file_upload{
			padding: 3px 0;
			width: 90px;
			background: #337BFC;
			border: 1px solid #337BFC;
			border-radius: 26px;
		}
		.btn-label{
			font-size: 12px;
			font-weight: 400;
			color: #B1B1B1;
			line-height: 14px;
		}
		.file-name{
			width: 85%;
			margin-left: 5px;
			box-sizing: border-box;
			overflow: scroll;
			color: blue;
			float: left;
			white-space: nowrap;
		}
		.file-name{
			display: inline-block;
		}
		.file_close{
			float: right;
		}
		
		.uploadBtn{
			padding-top: 2px;
			display: inline-block;
			text-align: center;
			font-size: 14px;
			font-weight: 400;
			color: #FFFFFF;
			width: 83px;
			height: 26px;
			background: #337BFC;
			border: 1px solid #337BFC;
			border-radius: 26px;
		}
		.tip{
			width: 100%;
			text-align: left;
			vertical-align: bottom;
			display: inline-block;
			font-size: 12px;
			font-weight: 400;
			color: #B1B1B1;
			margin-top: 10px;
		}
		.fileContent{
			padding:20px 0;
			margin:0 20px;
			border-bottom: 1px solid #eeeeee;
		}
		.fileContent-item{
			width: 100%;
			min-height: 60px;
			background: #F4F7FE;
			border-radius: 10px;
			margin-bottom: 10px;
		}
		.fileContent-item:last-child{
			margin-bottom: 0px;
		}
		.typeImg{
			width: 30px;
			height: 34px;
			display: inline-block;
			vertical-align: top;
		}
		.fileContent-item-title{
			width: calc(100% - 90px);
			height: 34px;
			display: inline-block;
			text-align: left;
			margin-left: 10px;
		}
		.titleSpan{
			width: 100%;
			word-break: break-all;
			font-size: 14px;
			font-weight: 500;
			color: #191515;
			line-height: 14px;
			display: block;		
		}
		.fileSize{
			font-size: 12px;
			font-weight: 400;
			color: #191515;
			line-height: 14px;
		}
		.removeFile{
			width: 18px;
			height: 18px;
			display: inline-block;
			vertical-align: top;
		}
		
		.radio_inline{
			display: inline-block;
			width: 65%;
		}
		.radio_inline label{

			width: 20%;
			padding-left: 40px;
			padding-right: 40px;
		}
		.radio_inline input[type=radio]{
			width: 15%;             
			right: auto;
		}
	</style>
	</head>

	<body>
		<!--页面主结构开始-->
		<div id="app" class="mui-views">
			<div class="mui-view">
				<div class="mui-navbar">
				</div>
				<div class="mui-pages">
				</div>
			</div>
		</div>
		<!--页面主结构结束-->
		<!--单页面开始-->
		<div id="mui-content" class="mui-page paish">
			<!--页面标题栏开始-->
			<!--页面标题栏结束-->
			<!--页面主内容区开始-->
			<div class="mui-page-content">
				<div id="scroll-content" class="mui-scroll-wrapper">
					<div class="mui-scroll">
						<div class="scroll-li">
							<div class="info-bar-content">
								<div class="info-bar-content-item">
									<div class="item-title">
										物资名称 
									</div>
									<div class="mui-input-row item-input">
										<input id="materialName" required="true"  readonly="true" type="text" class="inputCss" value=""
										 placeholder="请输入物资名称" maxlength="100">
									</div>
								</div>	
								<div class="info-bar-content-item">
									<div class="item-title">
										物资类型 
									</div>
									<div class="mui-input-row item-input">
										<input id="materialType_dictText" required="true" readonly="true" type="text" value=""
										 placeholder="请选择物资类型" class="inputCss">
									</div>
								</div>
								<div class="info-bar-content-item">
									<div class="item-title">
										型号
									</div>
									<div class="mui-input-row item-input">
										<input id="materialModel" required="true"  readonly="true" type="text" class="inputCss" value=""
										 placeholder="请输入型号" maxlength="100">
									</div>
								</div>
								<div class="info-bar-content-item">
									<div class="item-title">
										规格 
									</div>
									<div class="mui-input-row item-input">
										<input id="materialSpecs" required="true"  readonly="true" type="text" class="inputCss" value=""
										 placeholder="请输入规格" maxlength="100">
									</div>
								</div>
								<div class="info-bar-content-item">
									<div class="item-title">
										所属仓库 
									</div>
									<div class="mui-input-row item-input">
										<input id="whName" required="true"  readonly="true" type="text" class="inputCss" value=""
										 placeholder="请输入所属仓库 " maxlength="100">
									</div>
								</div>
								<div class="info-bar-content-item">
									<div class="item-title">
										库存数量 
									</div>
									<div class="mui-input-row item-input">
										<input id="materialCount" required="true"  readonly="true" type="text" class="inputCss" value=""
										 placeholder="请输入库存数量" maxlength="100">
									</div>
								</div>
								<div class="info-bar-content-item">
									<div class="item-title">
										管理员 
									</div>
									<div class="mui-input-row item-input">
										<input id="whManagerId" required="true"  readonly="true" type="text" class="inputCss" value=""
										 placeholder="请输入管理员" maxlength="100">
									</div>
								</div>
								<div class="info-bar-content-item">
									<div class="item-title">
										联系方式
									</div>
									<div class="mui-input-row item-input">
										<input id="whPhone" required="true"  readonly="true" type="text" class="inputCss" value=""
										 placeholder="请输入联系方式" maxlength="100">
									</div>
								</div>
								<div class="info-bar-content-item">
									<div class="item-title">
										有效期（天）
									</div>
									<div class="mui-input-row item-input">
										<input id="materialValidityDays" required="true"  readonly="true" type="text" class="inputCss" value=""
										 placeholder="请输入有效期（天）" maxlength="100">
									</div>
								</div>
								<div class="info-bar-content-item">
									<div class="item-title">
										是否需要保养
									</div>
									<div class="mui-input-row item-input">
										<div class="mui-input-row change">
											<span class="radio_inline mui-radio">
												<input name="radio1" type="radio" id="radio_yes" checked value="1" disabled>
												<label for="radio_yes">是</label>
												<input name="radio1" type="radio" id="radio_no" value="0" disabled>
												<label for="radio_no">否</label>
											</span>
										</div>
									</div>
								</div>
								<div class="info-bar-content-item">
									<div class="item-title">
										备注
									</div>
									<div class="mui-input-row item-input">
										 <textarea id="remarks" required="true"  type="text" class="inputCss" 
										 value="" maxlength="100" style="min-height: 40px;" readonly="true"></textarea>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
			<!--页面主内容区结束-->
		</div>

	</body>

	<script type="text/javascript" src="http://39.98.190.45/supermap/mapbox-gl-enhance.js"></script>
	<script type="text/javascript" src="http://39.98.190.45/supermap/iclient-mapboxgl.min.js"></script>
	<script src="http://39.98.190.45/mobile-lib/mobile-lib.umd.min.js"></script>


	<script src="../../../js/mui.min.js"></script>
	<script src="../../../js/mui.view.js"></script>
	<script src="../../../js/mui.locker.js"></script>
	<script src="../../../js/mui.picker.min.js"></script>
	<script src="../../../js/mui.picker.js"></script>
	<script src="../../../js/mui.poppicker.js"></script>

	<script src="../../../js/app.js"></script>
	<script src="../../../js/config.js"></script>
	<script src="../../../js/jquery.min.js"></script>
	<script src="../../../js/common.js"></script>	
	<script src="../../../js/conservation.js"></script>
	<script src="../../../js/quality/quality.js"></script>
	<script src="../../../js/helper.js"></script>
	<script src="../../../js/uploadimage.js"></script>
	<script src="../../../js/s4.js"></script>
	<script src="../../../js/smutils.js"></script>
	<script src="../../../js/byte&string.js"></script>
	<script src="../../../js/ajaxhook.min.js"></script>
	<script src="../../../js/mui.zoom.js"></script>
	<script src="../../../js/mui.previewimage.js"></script>
	<script src="../../../js/infoQuery/emList.js"></script>

	<!-- <script src="../../../js/vconsole.min.js"></script> -->
	<script>
		// var vConsole = new VConsole();
		mui.init({
		swipeBack:false
	});
		//初始化单页view
		var viewApi = mui('#app').view({
			defaultPage: '#mui-content'
		});
		var self;
		var extras = {
			materialId:'',
			whId:''
		}
		
		var tableData = [];
		
		//初始化单页的区域滚动
		mui('.mui-scroll-wrapper').scroll();

		var userPicker = new mui.PopPicker();
		mui.plusReady(function() {
			//界面元素控制
			self = plus.webview.currentWebview();
			extras.materialId = self.materialId;
			extras.whId = self.whId
			console.log(JSON.stringify(extras) )
			
			initForm(extras.materialId, extras.whId);
			//  initCallback();
			
			// var originalHeight = document.documentElement.clientHeight || document.body.clientHeight;
			// window.onresize = function() {
			// 	var resizeHeight = document.documentElement.clientHeight || document.body.clientHeight;
			// 	//软键盘弹起与隐藏  都会引起窗口的高度发生变化
			// 	if (resizeHeight * 1 < originalHeight * 1) { //resizeHeight<originalHeight证明窗口被挤压了
			// 		// plus.webview.currentWebview().setStyle({
			// 		// 	height: originalHeight + 75
			// 		// });
			// 		$("#scroll-content").css("margin","0")
			// 		$("#bottom-item-btn").hide()
			// 	}else{
			// 		$("#scroll-content").css("margin-bottom","100px")
			// 		$("#bottom-item-btn").show()
			// 	}
			// }
		});
		
		var initDestoryData = function(data, callback){
			for(let key in data){
				if(data[key] == '' || data[key] == null){
					data[key] = '暂无'
				}
			}
			callback(data);
		}

		//界面元素控制
		function initForm(materialId, whId) {
			console.log("materialId",materialId)
			console.log("whId",whId)
			getEmDetails(materialId, whId, function(data){
				tableData = data.result[0];
				$('#materialValidityDays').attr("value",tableData.materialValidityDays);
				if(tableData.materialMtPeriod == 0){
					$("#radio_no").attr("checked",true)
					$("#radio_yes").removeAttr("checked")
				}else{
					$("#radio_yes").attr("checked",true)
					$("#radio_no").removeAttr("checked")
				}
				initDestoryData(tableData, function(Data){
					console.log(JSON.stringify(Data))
					$('#whName').attr("value",Data.whName);
					$('#remarks').val(Data.remarks);
					$('#whPhone').attr("value",Data.whPhone);
					$('#materialCount').attr("value",Data.materialCount);
					$('#whManagerId').attr("value",Data.whManagerId);
					$('#materialName').attr("value",Data.materialName);
					$('#materialModel').attr("value",Data.materialModel);
					$('#materialSpecs').attr("value",Data.materialSpecs);
					$('#materialType_dictText').attr("value",Data.materialType_dictText);
				})
				
				
			})
		}
		
	</script>

</html>
