<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8">
		<title>湖泊详情</title>
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black">

		<link href="../../../css/mui.min.css" rel="stylesheet" />
		<link href="../../../css/mui.picker.min.css" rel="stylesheet" />
		<link href="../../../css/mui.poppicker.css" rel="stylesheet" />
		<link href="../../../css/common.css" rel="stylesheet" />
		<link rel="stylesheet" type="text/css" href="../../../css/mui.imageviewer.css" />
		<style>
			.mui-popover {
			height: 300px;
		}
		.mui-content {
			padding: 10px;
		}
		.bar-title{
			font-size: 14px;
			font-weight: 400;
			color: #888888;
		}
		.item-title{
			font-size: 14px;
			font-weight: 400;
			color: #444444;
		}
	.mui-icon-arrowright{
		color:#62666E;
		font-weight: 100 !important;
		width: 16px;
	}
	.inputCss{
		font-size: 16px;
		font-weight: 400;
		color: #1A1616;
		height: 30px;
	}
	.checkBoxCss{
		font-size: 16px;
		font-weight: 400;
		color: #000000;
	}
		.bottom-item-btn {
			height: 100px;
			position: fixed;
			z-index: 99;
			width: 100%;
			background: #f2f2f2;
			bottom: 0px;
			padding-top: 30px;
		}
		.bottom-item-btn .item {
			width: 50%;
			float: left;
			text-align: center;
			padding: 0 14px;

		}

		.bottom-item-btn .item div {
			border: 1px solid #337BFB;
			border-radius: 20px;
			height: 40px;
			line-height: 40px;
			font-size: 16px;
		}
		.file-item-box ul li{
			height: 30px;
			line-height: 30px;
			padding: 0;
			margin: 0;

		}
		.mui-table-view:after{ height:0}
		.mui-table-view:before{ height:0}
		.mui-table-view-cell:after{ height:0}
		.mui-table-view-cell:before{ height:0}
		.mui-table-view::-webkit-scrollbar {
			display: none;
		}
		.mui-table-view-cell{
			width: 100%;
			text-align: left;
		}
		textarea::-webkit-input-placeholder{
            color:#B1B1B1;			
			font-size: 16px;
			font-weight: 400;
		}
		.img_item {
			float: left;
			text-align: left;
			width: 72px;
			height: 100px;
			margin-right: 20px;
			position: relative;
		}
		
		.img_item::after {
			clear: both;
			content: '';
			display: block;
			width: 0;
			height: 0;
			visibility: hidden;
		}
		.img_item .myImgClose{
			position: absolute;
			right: -5px;
			top: -5px;
		}
		.img_item img{
			width: 72px;
			height: 72px;
			border-radius: 5px;
			overflow: hidden;
		}
		.img_item .img_close {
			display: inline-block;
			background-color: #1da1f2;
			color: #FFF;
		}
		.file_upload{
			padding: 3px 0;
			width: 90px;
			background: #337BFC;
			border: 1px solid #337BFC;
			border-radius: 26px;
		}
		.btn-label{
			font-size: 12px;
			font-weight: 400;
			color: #B1B1B1;
			line-height: 14px;
		}
		.file-name{
			width: 85%;
			margin-left: 5px;
			box-sizing: border-box;
			overflow: scroll;
			color: blue;
			float: left;
			white-space: nowrap;
		}
		.file-name{
			display: inline-block;
		}
		.file_close{
			float: right;
		}
		
		.uploadBtn{
			padding-top: 2px;
			display: inline-block;
			text-align: center;
			font-size: 14px;
			font-weight: 400;
			color: #FFFFFF;
			width: 83px;
			height: 26px;
			background: #337BFC;
			border: 1px solid #337BFC;
			border-radius: 26px;
		}
		.tip{
			width: 100%;
			text-align: left;
			vertical-align: bottom;
			display: inline-block;
			font-size: 12px;
			font-weight: 400;
			color: #B1B1B1;
			margin-top: 10px;
		}
		.fileContent{
			padding:20px 0;
			margin:0 20px;
			border-bottom: 1px solid #eeeeee;
		}
		.fileContent-item{
			width: 100%;
			min-height: 60px;
			background: #F4F7FE;
			border-radius: 10px;
			margin-bottom: 10px;
		}
		.fileContent-item:last-child{
			margin-bottom: 0px;
		}
		.typeImg{
			width: 30px;
			height: 34px;
			display: inline-block;
			vertical-align: top;
		}
		.fileContent-item-title{
			width: calc(100% - 90px);
			height: 34px;
			display: inline-block;
			text-align: left;
			margin-left: 10px;
		}
		.titleSpan{
			width: 100%;
			word-break: break-all;
			font-size: 14px;
			font-weight: 500;
			color: #191515;
			line-height: 14px;
			display: block;		
		}
		.fileSize{
			font-size: 12px;
			font-weight: 400;
			color: #191515;
			line-height: 14px;
		}
		.removeFile{
			width: 18px;
			height: 18px;
			display: inline-block;
			vertical-align: top;
		}
	</style>
	</head>

	<body>
		<!--页面主结构开始-->
		<div id="app" class="mui-views">
			<div class="mui-view">
				<div class="mui-navbar">
				</div>
				<div class="mui-pages">
				</div>
			</div>
		</div>
		<!--页面主结构结束-->
		<!--单页面开始-->
		<div id="mui-content" class="mui-page paish">
			<!--页面标题栏开始-->
			<!--页面标题栏结束-->
			<!--页面主内容区开始-->
			<div class="mui-page-content">
				<div id="scroll-content" class="mui-scroll-wrapper">
					<div class="mui-scroll">
						<div class="scroll-li">
							<div class="info-bar-content">
								<div class="info-bar-content-item">
									<div class="item-title">
										湖泊（水库）名称
									</div>
									<div class="mui-input-row item-input">
										<input id="lkName" required="true" readonly="true" type="text" class="inputCss" value="" maxlength="100">
									</div>
								</div>
								<div class="info-bar-content-item">
									<div class="item-title">
										湖泊（水库）编码
									</div>
									<div class="mui-input-row item-input">
										<input id="lkCode" required="true" readonly="true" type="text" value="" class="inputCss" style="width:calc(100% - 20px)">
									</div>
								</div>
								<div class="info-bar-content-item">
									<div class="item-title">
										流域
									</div>
									<div class="mui-input-row item-input">
										<input id="basName" required="true" readonly="true" type="text" class="inputCss" value="" maxlength="100">
									</div>
								</div>
								<div class="info-bar-content-item">
									<div class="item-title">
										所在水系
									</div>
									<div class="mui-input-row item-input">
										<input id="belongSatweSystem" required="true" readonly="true" type="text" class="inputCss" value=""
										 maxlength="100">
									</div>
								</div>
								<div class="info-bar-content-item">
									<div class="item-title">
										是否跨行政区域
									</div>
									<div class="mui-input-row item-input">
										<input id="ispassRegin" required="true" readonly="true" type="text" class="inputCss" value=""
										 maxlength="100">
									</div>
								</div>
								<div class="info-bar-content-item">
									<div class="item-title">
										所跨行政区域
									</div>
									<div class="mui-input-row item-input">
										<input id="ispassReginName" required="true" readonly="true" type="text" class="inputCss" value=""
										 maxlength="100">
									</div>
								</div>
								<div class="info-bar-content-item">
									<div class="item-title">
										常年水面面积（km²）
									</div>
									<div class="mui-input-row item-input">
										<input id="area" required="true" readonly="true" type="text" class="inputCss" value="">
									</div>
								</div>
								<div class="info-bar-content-item">
									<div class="item-title">
										流域面积（km²）
									</div>
									<div class="mui-input-row item-input">
										<input id="basinArea" required="true" readonly="true" type="text" class="inputCss" value="" maxlength="100">
									</div>
								</div>
								<div class="info-bar-content-item">
									<div class="item-title">
										平均水深（m）
									</div>
									<div class="mui-input-row item-input">
										<input id="meaAnnWatDept" required="true" readonly="true" type="text" class="inputCss" value=""
										 maxlength="100">
									</div>
								</div>
								<div class="info-bar-content-item">
									<div class="item-title">
										蓄水量（m³）
									</div>
									<div class="mui-input-row item-input">
										<input id="volume" required="true" readonly="true" type="text" class="inputCss" value=""
										 maxlength="100">
									</div>
								</div>
								<div class="info-bar-content-item">
									<div class="item-title">
										出/入湖（库）河流名称
									</div>
									<div class="mui-input-row item-input">
										<input id="enterLakeRiOutLakeRiv" required="true" readonly="true" type="text" class="inputCss" value="" maxlength="100">
									</div>
								</div>
								<div class="info-bar-content-item">
									<div class="item-title">
										出/入湖（库）河流编码
									</div>
									<div class="mui-input-row item-input">
										<input id="enterLakeRiOutLakeRivCode" required="true" readonly="true" type="text" class="inputCss" value="" maxlength="100">
									</div>
								</div>
								<div class="info-bar-content-item">
									<div class="item-title">
										交汇位置
									</div>
									<div class="mui-input-row item-input">
										<input id="xy" required="true" readonly="true" type="text" class="inputCss" value="">
									</div>
								</div>
								<div class="info-bar-content-item">
									<div class="item-title">
										类型
									</div>
									<div class="mui-input-row item-input">
										<input id="lakeCategory_dictText" required="true" readonly="true" type="text" class="inputCss" value="" maxlength="100">
									</div>
								</div>
								<div class="info-bar-content-item">
									<div class="item-title">
										多年平均入/出湖水量（m³）
									</div>
									<div class="mui-input-row item-input">
										<input id="outWaterEnterWater" required="true" readonly="true" type="text" class="inputCss" value="" maxlength="100">
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
			<!--页面主内容区结束-->
		</div>

	</body>

	<script type="text/javascript" src="http://39.98.190.45/supermap/mapbox-gl-enhance.js"></script>
	<script type="text/javascript" src="http://39.98.190.45/supermap/iclient-mapboxgl.min.js"></script>
	<script src="http://39.98.190.45/mobile-lib/mobile-lib.umd.min.js"></script>


	<script src="../../../js/mui.min.js"></script>
	<script src="../../../js/mui.view.js"></script>
	<script src="../../../js/mui.locker.js"></script>
	<script src="../../../js/mui.picker.min.js"></script>
	<script src="../../../js/mui.picker.js"></script>
	<script src="../../../js/mui.poppicker.js"></script>

	<script src="../../../js/app.js"></script>
	<script src="../../../js/config.js"></script>
	<script src="../../../js/jquery.min.js"></script>
	<script src="../../../js/common.js"></script>	
	<script src="../../../js/conservation.js"></script>
	<script src="../../../js/quality/quality.js"></script>
	<script src="../../../js/helper.js"></script>
	<script src="../../../js/uploadimage.js"></script>
	<script src="../../../js/s4.js"></script>
	<script src="../../../js/smutils.js"></script>
	<script src="../../../js/byte&string.js"></script>
	<script src="../../../js/ajaxhook.min.js"></script>
	<script src="../../../js/mui.zoom.js"></script>
	<script src="../../../js/mui.previewimage.js"></script>
	<script src="../../../js/infoQuery/river&lake.js"></script>

	<!-- <script src="../../../js/vconsole.min.js"></script> -->
	<script>
		// var vConsole = new VConsole();
		mui.init({
			swipeBack: false
		});
		//初始化单页view
		var viewApi = mui('#app').view({
			defaultPage: '#mui-content'
		});
		var _self;
		var code;
		var riverFormData;

		var strAttachment = [{
			groupId: "",
			fileTokens: "1",
			fieldName: "checkFile",
			tableName: "PROJECT_DAILY_INSPECTION"
		}]
		//初始化单页的区域滚动
		mui('.mui-scroll-wrapper').scroll();

		var userPicker = new mui.PopPicker();
		mui.plusReady(function() {
			//界面元素控制
			initView();

			// 点击事件
			initDownSelect();
			//初始化回调
			// initCallback();

			// 初始化选项框状态
			initCheckBox();

			// var originalHeight = document.documentElement.clientHeight || document.body.clientHeight;
			// window.onresize = function() {
			// 	var resizeHeight = document.documentElement.clientHeight || document.body.clientHeight;
			// 	//软键盘弹起与隐藏  都会引起窗口的高度发生变化
			// 	if (resizeHeight * 1 < originalHeight * 1) { //resizeHeight<originalHeight证明窗口被挤压了
			// 		// plus.webview.currentWebview().setStyle({
			// 		// 	height: originalHeight + 75
			// 		// });
			// 		$("#scroll-content").css("margin","0")
			// 		$("#bottom-item-btn").hide()
			// 	}else{
			// 		$("#scroll-content").css("margin-bottom","100px")
			// 		$("#bottom-item-btn").show()
			// 	}
			// }
		});

		//界面元素控制
		var initView = function() {
			_self = plus.webview.currentWebview();
			lkCode = _self.params
			initForm(lkCode);

			var date = new Date();
			var now = date.getFullYear() + "-" + (date.getMonth() + 1) + '-' + date.getDate()

			function showData(data) {

			}

		}

		var initDestoryData = function(data, callback) {
			for (let key in data) {
				if (data[key] == '' || data[key] == null) {
					data[key] = '暂无'
				}
			}
			callback(data);
		}


		var initForm = function(lkCode) {
			getLakeById(lkCode, function(data) {
				if (data.success) {
					riverFormData = data.result;
					
					initDestoryData(riverFormData, function(Data) {
						console.log(JSON.stringify(Data))
						$('#lkName').attr("value", Data.lkName);
						$('#lkCode').attr("value", Data.lkCode);
						$('#basName').attr("value", Data.basName);
						$('#belongSatweSystem').attr("value", Data.belongSatweSystem);
						$('#ispassRegin').attr("value", Data.ispassRegin);
						$('#ispassReginName').attr("value", Data.ispassReginName);
						$('#area').attr("value", Data.area);
						$('#basinArea').attr("value", Data.basinArea);
						$('#meaAnnWatDept').attr("value", Data.meaAnnWatDept);
						$('#volume').attr("value", Data.volume);
						$('#enterLakeRiOutLakeRiv').attr("value", Data.enterLakeRiOutLakeRiv);
						$('#enterLakeRiOutLakeRivCode').attr("value", Data.enterLakeRiOutLakeRivCode);
						$('#xy').attr("value", Data.xy);
						$('#lakeCategory').attr("value", Data.lakeCategory);
						$('#enterOutwater').attr("value", Data.enterOutwater);
						$('#lakeCategory_dictText').attr("value",Data.lakeCategory_dictText);
						$('#outWaterEnterWater').attr("value",Data.outWaterEnterWater)
					})
				} else {
					app.toast("请求出错，请稍后重试！")
				}
			})
		}


		// 初始化选项框状态
		var initCheckBox = function() {
			$(".info-bar-content-item").find(":checkbox").each(function() {
				$(this).click(function() {
					if ($(this).is(':checked')) {
						$(this).parent().siblings().find(":checkbox").each(function() {
							$(this).prop("checked",false)
						});
					}
				});
			});
		}

		// 点击事件
		var initDownSelect = function() {

		}

		Date.prototype.Format = function(fmt) { // author: meizz
			var o = {
				"M+": this.getMonth() + 1, // 月份
				"d+": this.getDate(), // 日
				"h+": this.getHours(), // 小时
				"m+": this.getMinutes(), // 分
				"s+": this.getSeconds(), // 秒
				"q+": Math.floor((this.getMonth() + 3) / 3), // 季度
				"S": this.getMilliseconds() // 毫秒
			};
			if (/(y+)/.test(fmt))
				fmt = fmt.replace(RegExp.$1, (this.getFullYear() + "").substr(4 - RegExp.$1.length));
			for (var k in o)
				if (new RegExp("(" + k + ")").test(fmt)) fmt = fmt.replace(RegExp.$1, (RegExp.$1.length == 1) ? (o[k]) : (("00" +
					o[k]).substr(("" + o[k]).length)));
			return fmt;
		}

		function format_input(type, obj) {
			if (/^\s+$/gi.test(obj.value)) {
				obj.value = '';
			}
			var t = type == 1 ? '地点' : '参与主体';
			var num = 50;
			if (obj.value.length >= num) {
				obj.value = obj.value.slice(0, num);
				// obj.focus();				
				app.toast(t + "不可大于" + num + "个字！")
			}
		}

		// function format_textarea(num,obj) {
		// 	if (/^\s+$/gi.test(obj.value)) {
		// 		obj.value = '';
		// 	}
		// 	if(num == 1){
		// 		if(obj.value.length > 0){
		// 			$("#clear").show();
		// 			if (obj.value.length >= 2000) {
		// 				obj.value = obj.value.slice(0,2);							
		// 				app.toast("检查情况及发现隐患不可大于2000个字！")
		// 			}
		// 		}else $("#clear").hide();				
		// 	}else{
		// 		if(obj.value.length > 0){
		// 			$("#clear1").show();
		// 			if (obj.value.length >= 2000) {
		// 				obj.value = obj.value.slice(0,2000);							
		// 				app.toast("整改描述不可大于2000个字！")
		// 			}
		// 		}else $("#clear1").hide();
		// 	}
	</script>

</html>
